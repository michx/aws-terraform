apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    io.service: log4j
  name: log4j
spec:
  replicas: 1
  selector:
    matchLabels:
      io.service: lo4j
  strategy:
    type: Recreate
  template:
    metadata:
      labels:
        io.service: log4j
    spec:
      containers:
          - name: log4j
            command: ["/usr/src/app/wait-for-it.sh"]          
            args: ["database:5432","--", "yarn", "start:server"]
            env:
              - name: DATABASE_HOST
                value: database
              - name: DATABASE_PORT
                value: "5432"
            image: jahidularafat/log4j-shell-poc:exploit
            ports:
              - containerPort: 8080
                hostPort: 8080
                protocol: TCP
      restartPolicy: Always